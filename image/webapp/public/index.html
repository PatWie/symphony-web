<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

	<title>Simple Layout Demo</title>

	<script type="text/javascript" src="assets/js/jquery.js"></script>
	<script type="text/javascript" src="assets/js/jquery.ui.all.js"></script>
	<script type="text/javascript" src="assets/js/jquery.layout.js"></script>
	<script src="assets/js/codemirror.js"></script>
	<script src="assets/js/simplescrollbars.js"></script>
	<script src="assets/js/octave/octave.js"></script>

	<link rel="stylesheet" href="assets/css/codemirror.css">
	<link rel="stylesheet" href="assets/css/simplescrollbars.css">
	<link rel="stylesheet" href="assets/css/layout-default-latest.css">
	<link rel="stylesheet" href="assets/css/style.css" type="text/css">
	<script type="text/javascript">
	var myLayout; // a var is required because this page utilizes: myLayout.allowOverflow() method
	var cmSiteModel;
	var cmSiteData;
	var cmSiteOutput;
	$(document).ready(function () {
		myLayout = $('body').layout({
			//east__showOverflowOnHover: true,
			east__size: '50%',
			center__size: '50%',
			resizable:  false,
			center__paneSelector:	".outer-center",
		});
		cmSiteModel = CodeMirror.fromTextArea(document.getElementById('edit-model'), {lineNumbers: true, mode: "octave", matchBrackets : true, tabMode: "indent","theme": "monokai","lineWrapping":true,scrollbarStyle: "overlay"}); 
		cmSiteData = CodeMirror.fromTextArea(document.getElementById('edit-data'), {lineNumbers: true, mode: "octave", matchBrackets : true, tabMode: "indent","theme": "monokai","lineWrapping":true,scrollbarStyle: "overlay"}); 
		cmSiteOutput = CodeMirror.fromTextArea(document.getElementById('edit-output'), {lineNumbers: true, matchBrackets : true, tabMode: "indent","theme": "monokai","lineWrapping":true,scrollbarStyle: "overlay", height:"100%"}); 
	
		cmSiteOutput.setSize("100%","100%");

	});

	function clear(){
		cmSiteOutput.setValue("");
	}
	function solve(){
		$.ajax({
	    url : "/api",
	    type: "POST",
	    data : {raw_model:cmSiteModel.getValue(),raw_data:cmSiteData.getValue()},//Array ,
	    success: function(data, textStatus, jqXHR)
	    {
	        //data - response from server
	        cmSiteOutput.setValue(data);
	    },
	    error: function (jqXHR, textStatus, errorThrown)
	    {

	    }
	});
	}


	</script>

</head>
<body>

<!-- manually attach allowOverflow method to pane -->

<div class="outer-center">
<button class="btn" type="button" onclick="solve();">solve</button>
<button class="btn" type="button" onclick="clear();">clear output</button>
	<h3>Model</h3>
	<textarea id="edit-model">
set student;
set group;

var assign{i in student, j in group} binary;
param pref{i in student, j in group};

maximize totalPref:
     sum{i in student, j in group} pref[i,j]*assign[i,j];

subject to exactly_one_group {i in student}:
      sum {j in group} assign[i,j] =1;

subject to min3{j in group}:
     sum{i in student} assign[i,j]>=3;

subject to max4{j in group}:
     sum{i in student} assign[i,j]<=4;

	</textarea>
	<h3>Data</h3>
	<textarea id="edit-data">
set group:= A ED EZ G H1 H2 RB SC;
set student:= Allen Black Chung Clark Conners Cumming Demming Eng Farmer Forest Goodman Harris Holmes Johnson Knorr Manheim Morris Nathan Neuman Patrick Rollins Schuman Silver Stein Stock Truman Wolman Young;

param pref:
          A ED EZ G H1 H2 RB SC:=
Allen         1 3 4 7 7 5 2 6
Black        6 4 3 5 5 7 1 3
Chung      6 2 3 1 1 7 5 4
Clark         7 6 1 2 2 3 5 4
Conners    7 6 1 3 3 4 5 2
Cumming  6 7 4 2 2 3 5 1
Demming  2 5 4 6 6 1 3 7
Eng           4 7 2 1 1 6 3 5
Farmer      7 6 5 2 2 1 3 4
Forest        6 7 2 5 5 1 3 4
Goodman  7 6 2 4 4 5 1 3
Harris        4 7 5 3 3 1 2 6
Holmes     6 7 4 2 2 3 5 1
Johnson    7 2 4 6 6 5 3 1
Knorr         7 4 1 2 2 5 6 3
Manheim   4 7 2 1 1 3 6 5
Morris        7 5 4 6 6 3 1 2
Nathan      4 7 5 6 6 3 1 2
Neuman    7 5 4 6 6 3 1 2
Patrick      1 7 5 4 4 2 3 6
Rollins      6 2 3 1 1 7 5 4
Schuman 4 7 3 5 5 1 2 6
Silver       4 7 3 1 1 2 5 6
Stein        6 4 2 5 5 7 1 3
Stock       5 2 1 6 6 7 4 3
Truman    6 3 2 7 7 5 1 4
Wolman    6 7 4 2 2 3 5 1
Young        1 3 4 7 7 6 2 5;
	</textarea>

</div>

<div class="ui-layout-east">
	<textarea id="edit-output" class="full"></textarea>
</div>


</body>
</html>